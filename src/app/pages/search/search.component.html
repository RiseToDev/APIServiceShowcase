<div class="search-page-container">
  <div class="search-page-container" *ngIf="requestedData.length === 0">
    <mat-form-field appearance="fill">
      <mat-label>Поля по которым сортировать</mat-label>
      <mat-select [(value)]="fieldSortedBy">
        <mat-option *ngFor="let option of displayedColumns" [value]="option">
          {{ option }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Сортировка</mat-label>
      <mat-select [(value)]="sortBy">
        <mat-option *ngFor="let option of sortOptions" [value]="option.value">
          {{ option.viewValue }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <button
      mat-flat-button
      color="accent"
      (click)="searchButtonHandler()"
      [disabled]="!fieldSortedBy || !sortBy"
    >
      Загрузить
    </button>
  </div>
  <div class="result-list-container" *ngIf="requestedData.length !== 0">
<!--    <mat-list role="list" *ngFor="let option of requestedData">-->
<!--      <mat-list-item role="listitem"><div class="option">{{ option }}</div></mat-list-item>-->
<!--    </mat-list>-->
    <table mat-table [dataSource]="requestedData" class="mat-elevation-z8">
      <ng-container matColumnDef="fieldSortedBy">
        <th mat-header-cell *matHeaderCellDef>Field sorted by<br> "{{fieldSortedBy}}"</th>
        <td mat-cell *matCellDef="let element"> {{element.fieldSortedBy}} </td>
      </ng-container>
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> ID </th>
        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
      </ng-container>
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
      </ng-container>
      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef> Date </th>
        <td mat-cell *matCellDef="let element"> {{element.date}} </td>
      </ng-container>
      <ng-container matColumnDef="cost">
        <th mat-header-cell *matHeaderCellDef> Cost </th>
        <td mat-cell *matCellDef="let element"> {{element.cost}} </td>
      </ng-container>
      <ng-container matColumnDef="currency">
        <th mat-header-cell *matHeaderCellDef> Currency </th>
        <td mat-cell *matCellDef="let element"> {{element.currency}} </td>
      </ng-container>
      <ng-container matColumnDef="realty_capacity">
        <th mat-header-cell *matHeaderCellDef> Realty_capacity </th>
        <td mat-cell *matCellDef="let element"> {{element.realty_capacity}} </td>
      </ng-container>
      <ng-container matColumnDef="operation_type">
        <th mat-header-cell *matHeaderCellDef> Operation_type </th>
        <td mat-cell *matCellDef="let element"> {{element.operation_type}} </td>
      </ng-container>
      <ng-container matColumnDef="town">
        <th mat-header-cell *matHeaderCellDef> Town </th>
        <td mat-cell *matCellDef="let element"> {{element.town}} </td>
      </ng-container>
      <ng-container matColumnDef="district">
        <th mat-header-cell *matHeaderCellDef> District </th>
        <td mat-cell *matCellDef="let element"> {{element.district}} </td>
      </ng-container>
      <ng-container matColumnDef="street">
        <th mat-header-cell *matHeaderCellDef> Street </th>
        <td mat-cell *matCellDef="let element"> {{element.street}} </td>
      </ng-container>
      <ng-container matColumnDef="source">
        <th mat-header-cell *matHeaderCellDef> Source </th>
        <td mat-cell *matCellDef="let element"> {{element.source}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumnsForTable"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumnsForTable;"></tr>
    </table>
  </div>
  <button
    class="refresh-button"
    mat-mini-fab
    *ngIf="requestedData.length !== 0"
    (click)="refreshButtonHandler()"
  >
    <mat-icon>refresh</mat-icon>
  </button>
</div>
